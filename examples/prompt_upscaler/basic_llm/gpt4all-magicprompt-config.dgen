#! /usr/bin/env dgenerate --file
#! dgenerate 5.0.0

# show plugin help


\prompt_upscaler_help gpt4all


# Use The original MagicPrompt model with gpt4all


\set llm_model https://huggingface.co/QuantFactory/MagicPrompt-Stable-Diffusion-GGUF/resolve/main/MagicPrompt-Stable-Diffusion.Q4_0.gguf


stabilityai/stable-diffusion-xl-base-1.0
--model-type sdxl
--dtype float16
--variant fp16
--inference-steps 30
--guidance-scales 5
--clip-skips 0
--gen-seeds 1
--output-path gpt4all-magicprompt
--output-size 1024x1024
--prompt-weighter sd-embed
--prompt-upscaler dynamicprompts gpt4all;model={{ llm_model }};compute='cpu';context-tokens=1024;prepend-prompt=True
--prompts "a {horse|cow|dog} in a field on a cloudy day in the mountains"